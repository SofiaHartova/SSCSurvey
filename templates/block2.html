<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мероприятия</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../static/block1.css">

</head>
<body>
  <div class="container my-4">
    <h2 class="mb-4">Выберите мероприятия и укажите количество участников и дату</h2>
    <form id="eventsForm" method="POST" action="/block2">
      <div class="mb-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="event1" onchange="toggleInputs(1)">
          <label class="form-check-label" for="event1">
            Всероссийские соревнования по баскетболу среди команд общеобразовательных организаций
          </label>
        </div>
        <div class="hidden" id="inputs1">
          <div class="row g-3 align-items-center my-2">
            <div class="col-auto">
              <label for="participants1" class="col-form-label">Количество участников</label>
            </div>
            <div class="col-auto">
              <input type="number" class="form-control" id="participants1" placeholder="Введите количество">
            </div>
            <div class="col-auto">
              <label for="date1" class="col-form-label">Дата проведения</label>
            </div>
            <div class="col-auto">
              <input type="date" class="form-control" id="date1">
            </div>
          </div>
        </div>
      </div>

      <div class="mb-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="event2" onchange="toggleInputs(2)">
          <label class="form-check-label" for="event2">
            Всероссийские соревнования по волейболу «Серебряный мяч»
          </label>
        </div>
        <div class="hidden" id="inputs2">
          <div class="row g-3 align-items-center my-2">
            <div class="col-auto">
              <label for="participants2" class="col-form-label">Количество участников</label>
            </div>
            <div class="col-auto">
              <input type="number" class="form-control" id="participants2" placeholder="Введите количество">
            </div>
            <div class="col-auto">
              <label for="date2" class="col-form-label">Дата проведения</label>
            </div>
            <div class="col-auto">
              <input type="date" class="form-control" id="date2">
            </div>
          </div>
        </div>
      </div>

      <!-- Добавьте больше блоков мероприятий по аналогии с event1, event2 -->

      <button type="submit" class="btn btn-secondary" name="action" value="back">Назад</button>
      <button type="submit" class="btn btn-primary" name="action" value="next">Далее</button>
    </form>
  </div>

  <script>

    function toggleInputs(eventId) {
      const inputs = document.getElementById('inputs' + eventId);
      if (inputs.style.display === "none" || inputs.style.display === "") {
        inputs.style.display = "block";
      } else {
        inputs.style.display = "none";
      }
    }
    function saveEventData() {
        const event1Checked = document.getElementById('event1').checked;
        const participants1 = document.getElementById('participants1').value;
        const date1 = document.getElementById('date1').value;
  
        const event2Checked = document.getElementById('event2').checked;
        const participants2 = document.getElementById('participants2').value;
        const date2 = document.getElementById('date2').value;
  
        // Сохраняем данные о мероприятиях в localStorage
        const eventData = {
          event1: {
            checked: event1Checked,
            participants: participants1,
            date: date1
          },
          event2: {
            checked: event2Checked,
            participants: participants2,
            date: date2
          }
        };
  
        localStorage.setItem('eventData', JSON.stringify(eventData));
    } 
    document.getElementById('backPageBtn').addEventListener('click', saveEventData);
    document.getElementById('nextPageBtn').addEventListener('click', saveEventData);
  
      // Функция для загрузки данных из localStorage
    function loadEventData() {
        const savedData = localStorage.getItem('eventData');
        if (savedData) {
          const eventData = JSON.parse(savedData);
  
          document.getElementById('event1').checked = eventData.event1.checked;
          document.getElementById('participants1').value = eventData.event1.participants;
          document.getElementById('date1').value = eventData.event1.date;
  
          document.getElementById('event2').checked = eventData.event2.checked;
          document.getElementById('participants2').value = eventData.event2.participants;
          document.getElementById('date2').value = eventData.event2.date;
  
          // Отобразить скрытые блоки, если мероприятия были выбраны
          toggleInputs(1);
          toggleInputs(2);
        }
      }
      console.log(localStorage.getItem('eventData'))
      // Загрузить данные при загрузке страницы
    window.onload = loadEventData;
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
